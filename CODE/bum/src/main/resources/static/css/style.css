/* ========== Profile Page (disabled due to corrupted styles) ========== */
/*
   The original Profile Page block contained corrupted and malformed CSS that
   caused parsing errors and broke the stylesheet. To keep the product and
   home page styles intact, the Profile Page rules have been disabled here.

   If you want a clean Profile Page stylesheet restored, I can recreate a
   scoped, safe set of rules for `#profile-card`, `.wallet`, `#deposit-modal`,
   and related selectors. Ask and I'll implement.
*/
.main-content {
    max-width: 1100px; /* center layout for main content areas */
    margin: 32px auto; /* vertical spacing + center horizontally */
    padding: 20px; /* keep comfortable inner padding */
    box-sizing: border-box;
    width: 100%;
}
body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    background-color: #f4f5f7;
    color: #172b4d;
}

/* --- Bố cục Flexbox cho Sticky Footer --- */
body {
    display: flex;
    flex-direction: column;
    min-height: 100vh; /* Chiều cao tối thiểu bằng chiều cao màn hình */
}

.main-content {
    flex-grow: 1; /* Phần nội dung chính sẽ giãn nở để chiếm hết không gian */
    padding: 20px;
}

/* -------------------------------------- */


/* --- Header dính ở trên cùng --- */
header {
    position: sticky; /* Dính lại khi cuộn */
    top: 0; /* Dính ở vị trí trên cùng */
    background-color: #fff;
    padding: 15px 30px;
    border-bottom: 1px solid #dfe1e6;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    z-index: 1000; /* Đảm bảo header luôn nằm trên */
    display: flex;
    justify-content: space-between;
    align-items: center;
}

header h1 {
    color: #0052cc;
    margin: 0;
    font-size: 1.5em;
}

/* --------------------------------- */

/* --- User menu & Dropdown --- */
.user-menu {
    display: flex;
    align-items: center;
    gap: 12px;
}

.dropdown {
    position: relative;
    /* Thêm padding-bottom để tạo vùng đệm khi hover */
    padding-bottom: 10px;
    margin-bottom: -10px; /* Bù lại cho padding-bottom để không làm thay đổi bố cục */
}

.user-toggle {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: transparent;
    border: 1px solid transparent;
    border-radius: 8px;
    padding: 8px 12px;
    cursor: pointer;
    color: #172b4d;
}

.user-toggle:hover {
    background: #f4f5f7;
    border-color: #e6e8eb;
}

.avatar {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: #e9eefb;
    color: #0052cc;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
}

.chevron {
    font-size: 12px;
    color: #6b778c;
}

.dropdown-menu {
    display: none;
    position: absolute;
    right: 0;
    /* Đặt menu ngay sát dưới cùng của vùng .dropdown (bao gồm cả padding) */
    top: 100%;
    min-width: 220px;
    background: #fff;
    border: 1px solid #e6e8eb;
    border-radius: 8px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.08);
    padding: 8px 0;
    list-style: none;
    margin: 0;
    z-index: 1100;
}

/* Khi hover vào .dropdown (vùng đã có padding), hiển thị menu */
.dropdown:hover .dropdown-menu {
    display: block;
}

.dropdown-menu a,
.dropdown-menu .logout-btn {
    display: block;
    width: 100%;
    padding: 10px 14px;
    text-decoration: none;
    color: #172b4d;
    background: transparent;
    border: none;
    text-align: left;
    font: inherit;
    cursor: pointer;
}

.dropdown-menu a:hover,
.dropdown-menu .logout-btn:hover {
    background: #f4f5f7;
}

.menu-divider {
    height: 1px;
    background: #eef0f3;
    margin: 6px 0;
}

/* --------------------------------- */


/* --- Footer dính ở dưới cùng --- */
footer {
    background-color: #343a40;
    color: white;
    text-align: center;
    padding: 20px;
    flex-shrink: 0; /* Ngăn footer bị co lại */
}

/* --------------------------------- */

/* CSS cho nội dung demo */
.main-content h2 {
    color: #0052cc;
}

.main-content p {
    line-height: 1.6;
}

.placeholder {
    height: 1500px; /* Tạo chiều cao ảo để có thể cuộn trang */
    border: 2px dashed #ccc;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #aaa;
    font-size: 2em;
    margin-top: 20px;
}

/* ========== Home Page (scoped) ========== */
/* ========== Product Page (scoped) ========== */
.product-page .main-content { max-width: 1100px; padding-bottom: 40px; }

.product-page .product-detail-container {
    display: flex;
    flex-wrap: wrap;
    gap: 24px;
    padding: 20px;
    max-width: 1100px;
    margin: 0 auto;
}

.product-page .product-main-content { flex: 3; min-width: 320px; }
.product-page .product-sidebar { flex: 1; min-width: 300px; }

.product-page .purchase-box,
.product-page .info-box {
    background: #ffffff;
    border: 1px solid rgba(0,0,0,0.08);
    box-shadow: 0 6px 16px rgba(0,0,0,0.06);
    border-radius: 16px;
    padding: 14px 16px;
    margin-bottom: 20px;
}

.product-page .product-description h2,
.product-page .product-reviews h2 { border-bottom: 2px solid #eef0f3; padding-bottom: 10px; margin-top: 0; }
.product-page .purchase-box h3,
.product-page .info-box h3 { margin-top: 0; border-bottom: 1px solid #eef0f3; padding-bottom: 8px; margin-bottom: 12px; }

.product-page .product-video { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 12px; background: #f8fafc; }
.product-page .product-video iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 12px; }

.product-page .package-select-dropdown { width: 100%; padding: 9px 12px; border-radius: 10px; border: 1px solid rgba(0,0,0,0.14); background: #f9fafb; font-size: 14px; }
.product-page .package-select-dropdown:focus { outline: none; border-color: #2563eb; box-shadow: 0 0 0 3px rgba(37,99,235,0.15); background: #fff; }

.product-page .price-display { font-size: 22px; font-weight: 800; color: #16a34a; text-align: center; margin-bottom: 12px; }
.product-page .btn-buy { width: 100%; padding: 10px 14px; font-size: 16px; background-color: #2563eb; color: #fff; border: none; border-radius: 10px; cursor: pointer; }
.product-page .btn-buy:hover { background-color: #1e55d3; }

.product-page .info-list { list-style: none; padding: 0; margin: 0; }
.product-page .info-list li { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f5f5f5; }
.product-page .info-list li:last-child { border-bottom: none; }
.product-page .info-list .label { font-weight: 600; color: #6b7280; }
.product-page .info-list .value { color: #111827; }

.product-page .product-main-content h1 { margin: 0 0 12px; font-size: 22px; line-height: 1.3; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
.product-page .product-description div { line-height: 1.6; }
.product-page .product-reviews { margin-top: 8px; }

/* Reviews: modern card-style list */
.product-page .product-reviews .review {
    display: flex;
    gap: 12px;
    align-items: flex-start;
    background: #ffffff;
    border: 1px solid rgba(15,23,42,0.04);
    box-shadow: 0 6px 20px rgba(15,23,42,0.04);
    border-radius: 12px;
    padding: 12px 14px;
    margin-bottom: 12px;
}

.product-page .product-reviews .review-avatar {
    flex: 0 0 48px;
    height: 48px;
    border-radius: 999px;
    background: linear-gradient(135deg,#eef2ff,#e6f0ff);
    color: #0b3d91;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 14px;
    text-transform: uppercase;
}

.product-page .product-reviews .review-content { flex: 1 1 auto; min-width: 0; }

.product-page .product-reviews .review-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
}

.product-page .product-reviews .review-author { font-weight: 700; color: #0f172a; margin: 0; }
.product-page .product-reviews .review-meta { color: #6b7280; font-size: 13px; margin-left: 8px; }

.product-page .product-reviews .review-rating { display: flex; align-items: center; gap: 8px; margin-top: 6px; }
.product-page .product-reviews .review-rating .rating-badge {
    background: #f3f4f6;
    color: #0f172a;
    padding: 4px 8px;
    border-radius: 999px;
    font-weight: 700;
    font-size: 13px;
}
.product-page .product-reviews .stars { display: inline-flex; gap: 4px; align-items: center; }
.product-page .product-reviews .stars .star {
    font-size: 14px;
    line-height: 1;
    color: #e5e7eb; /* empty star color */
    display: inline-block;
}
.product-page .product-reviews .stars .star.filled { color: #f59e0b; }

/* Accessibility helper: visually hide but keep readable for screen readers */
.sr-only { position: absolute !important; height: 1px; width: 1px; overflow: hidden; clip: rect(1px, 1px, 1px, 1px); white-space: nowrap; border: 0; padding: 0; margin: -1px; }

.product-page .product-reviews .review-body { margin-top: 8px; color: #111827; line-height: 1.5; }

.product-page .product-reviews .review-actions { margin-top: 10px; display:flex; gap:8px; }
.product-page .product-reviews .review-actions button { font-size: 13px; padding: 6px 10px; border-radius: 8px; border: 1px solid rgba(0,0,0,0.06); background:#fff; cursor:pointer; }

/* Compact fallback for small screens */
@media (max-width: 700px) {
    .product-page .product-reviews .review { flex-direction: column; }
    .product-page .product-reviews .review-avatar { width: 44px; height: 44px; }
    .product-page .product-reviews .review-header { flex-direction: column; align-items: flex-start; }
}

/* Additional tweaks */
.product-page .product-reviews .review { transition: transform 0.12s ease, box-shadow 0.12s ease; }
.product-page .product-reviews .review:hover { transform: translateY(-4px); box-shadow: 0 12px 30px rgba(15,23,42,0.07); }
.product-page .product-reviews .review-meta { color: #6b7280; font-size: 13px; }
.product-page .product-reviews .rating-badge { background: linear-gradient(180deg,#ffffff,#f3f4f6); border:1px solid #e6e9ef; }

/* ---- Version history (modern look) ---- */
.product-page .version-history { margin-top: 16px; }
.product-page .version-history-table {
    width: 100%;
    border-collapse: separate; /* allow rounded corners */
    border-spacing: 0;
    border: 1px solid rgba(0,0,0,0.08);
    border-radius: 12px;
    overflow: hidden; /* for some browsers */
    background: #fff;
    box-shadow: 0 6px 16px rgba(0,0,0,0.06);
    table-layout: fixed; /* keep layout stable with long text */
}
.product-page .version-history-table thead th {
    background: #f8fafc;
    color: #374151;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: .02em;
    font-size: 12px;
    padding: 12px 14px;
    text-align: left;
}
.product-page .version-history-table tbody td {
    padding: 12px 14px;
    border-top: 1px solid #eef0f3;
    color: #111827;
    vertical-align: middle;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.product-page .version-history-table tbody tr:nth-child(even) { background: #fafbff; }
.product-page .version-history-table tbody tr:hover { background: #f4f7ff; }

/* columns width and numeric alignment */
.product-page .version-history-table td:nth-child(1) { width: 32%; font-variant-numeric: tabular-nums; }
.product-page .version-history-table td:nth-child(2) { width: 28%; font-variant-numeric: tabular-nums; }
.product-page .version-history-table td:nth-child(3) { width: 40%; text-align: left; }

.product-page .current-version-badge {
    display: inline-block;
    background: #16a34a;
    color: #fff;
    padding: 4px 10px;
    border-radius: 999px;
    font-size: 12px;
    font-weight: 700;
    box-shadow: 0 2px 6px rgba(22,163,74,0.2);
}

/* Mobile: stack rows with labels */
@media (max-width: 700px) {
    .product-page .version-history-table thead { display: none; }
    .product-page .version-history-table,
    .product-page .version-history-table tbody,
    .product-page .version-history-table tr,
    .product-page .version-history-table td { display: block; width: 100%; }
    .product-page .version-history-table tr { border-top: 1px solid #eef0f3; padding: 8px 6px; }
    .product-page .version-history-table td { border: none; padding: 8px 10px; white-space: normal; }
    .product-page .version-history-table td:nth-child(1)::before { content: 'Phiên bản'; display: block; color: #6b7280; font-size: 12px; text-transform: uppercase; margin-bottom: 2px; }
    .product-page .version-history-table td:nth-child(2)::before { content: 'Ngày phát hành'; display: block; color: #6b7280; font-size: 12px; text-transform: uppercase; margin-bottom: 2px; }
    .product-page .version-history-table td:nth-child(3)::before { content: 'Trạng thái'; display: block; color: #6b7280; font-size: 12px; text-transform: uppercase; margin-bottom: 2px; }
}

@media (max-width: 900px) {
    .product-page .product-detail-container { gap: 18px; }
}
.home-page .main-content {
    max-width: 1100px;
    padding-bottom: 48px; /* tránh đè vào phân trang/footer */
}

.home-page h2 {
    margin: 8px 0 16px;
    font-size: 24px;
    font-weight: 700;
}

.home-page .product-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 49px 32px; /* row-gap, column-gap */
    padding: 8px 0 4px;
    margin-bottom: 16px; /* tạo khoảng cách an toàn trước phân trang */
}

.home-page .product-card {
    background: #ffffff;
    border: 1px solid rgba(0,0,0,0.08);
    box-shadow: 0 6px 16px rgba(0,0,0,0.06);
    border-radius: 16px;
    padding: 12px; /* gọn hơn để tránh cao quá */
    display: flex;
    flex-direction: column;
    min-height: 260px; /* hạ chiều cao tối thiểu */
    transition: transform 0.06s ease, box-shadow 0.2s ease;
}

/* Make each card stretch to full row height so actions align */
.home-page .product-grid > .product-card { height: 100%; }

/* Push the bottom section to stick at the card bottom */
.home-page .product-card > div:last-child { margin-top: auto; }

.home-page .product-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 22px rgba(0,0,0,0.08);
}

.home-page .product-card h3 {
    margin: 0 0 8px;
    font-size: 17px; /* giảm nhẹ chiều cao tiêu đề */
    line-height: 1.3;
    display: -webkit-box;
    -webkit-line-clamp: 2; /* clamp name to 2 lines */
    -webkit-box-orient: vertical;
    overflow: hidden;
    word-break: break-word;
    hyphens: auto;
    min-height: calc(1.3em * 2); /* keep title height consistent */
}

.home-page .product-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 13px;
    color: #6b7280;
    margin-bottom: 8px;
    line-height: 1.2;
    min-height: 20px; /* keep metrics row steady */
}

.home-page .product-meta i { margin-right: 6px; color: #9aa4b2; }

.home-page .product-card p {
    color: #374151;
    margin: 8px 0 12px;
    line-height: 1.35;
    display: -webkit-box;
    -webkit-line-clamp: 1; /* gọn nhất: 1 dòng rồi ellipsis */
    -webkit-box-orient: vertical;
    overflow: hidden;
    min-height: calc(1.35em * 1); /* giữ chiều cao ổn định */
}

/* Optional: clamp title to 1 line when body has .compact-title */
.home-page.compact-title .product-card h3 {
    -webkit-line-clamp: 1;
    min-height: 1.3em;
}

.home-page .package-selector {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 14px;
}

.home-page .package-select-dropdown {
    width: 100%;
    padding: 8px 10px; /* giảm padding cho thấp hơn */
    border-radius: 10px;
    border: 1px solid rgba(0,0,0,0.14);
    background-color: #f9fafb;
    font-size: 14px;
    transition: border-color 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
}

/* Avoid overly tall selects on long option labels */
.home-page .package-select-dropdown { text-overflow: ellipsis; }

.home-page .package-select-dropdown:focus {
    outline: none;
    border-color: #2563eb;
    box-shadow: 0 0 0 3px rgba(37,99,235,0.15);
    background: #fff;
}

.home-page .price-display {
    font-size: 18px; /* hạ kích thước giá cho gọn */
    font-weight: 800;
    color: #16a34a;
    text-align: center;
}

.home-page .product-actions {
    display: flex;
    gap: 8px;
    margin-top: 8px; /* space from selector */
}

/* Buttons (scoped overrides) */
.home-page .btn {
    width: 100%;
    padding: 9px 12px; /* nút thấp hơn một chút */
    border-radius: 10px;
    font-weight: 600;
}

.home-page .btn-primary { background: #2563eb; color: #fff; }
.home-page .btn-primary:hover { background: #1e55d3; }

.home-page .btn-secondary { background: #111827; color: #fff; }
.home-page .btn-secondary:hover { background: #0b1220; }

.home-page .view-demo-btn[disabled],
.home-page .view-demo-btn[disabled]:hover {
    background: #e5e7eb;
    color: #9ca3af;
    cursor: not-allowed;
}

/* Pagination */
.home-page .pagination {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 6px;
    margin: 28px 0 8px; /* tăng khoảng cách so với grid */
}

.home-page .pagination a,
.home-page .pagination span {
    display: inline-block;
    min-width: 34px;
    padding: 8px 12px;
    text-decoration: none;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    color: #2563eb;
    background: #fff;
    transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease;
}

.home-page .pagination a:hover { background: #f3f4f6; }
.home-page .pagination .current { background: #2563eb; color: #fff; border-color: #2563eb; }
.home-page .pagination .disabled { color: #9ca3af; background: #f3f4f6; pointer-events: none; }

/* Video popup */
.home-page #videoPopup.video-popup {
    display: none; /* default hidden */
    position: fixed;
    inset: 0;
    z-index: 1000;
    background-color: rgba(0,0,0,0.7);
    backdrop-filter: blur(1px);
    justify-content: center;
    align-items: center;
    padding: 16px;
}

.home-page .video-popup-content {
    background: #fff;
    padding: 20px 20px 16px;
    border-radius: 12px;
    position: relative;
    box-shadow: 0 14px 40px rgba(0,0,0,0.25);
}

.home-page .video-popup-content iframe {
    width: min(90vw, 960px) !important;
    height: calc(min(90vw, 960px) * 0.5625) !important; /* 16:9 */
    border-radius: 10px;
}

.home-page .close-popup {
    position: absolute;
    top: -12px;
    right: -12px;
    background: #ef4444;
    color: #ffffff;
    border-radius: 999px;
    width: 34px;
    height: 34px;
    border: none;
    cursor: pointer;
    box-shadow: 0 6px 14px rgba(239,68,68,0.3);
}

/* Responsive tweaks */
@media (max-width: 1200px) {
    .home-page .product-grid { grid-template-columns: repeat(3, 1fr); }
}

@media (max-width: 900px) {
    .home-page .product-grid { grid-template-columns: repeat(2, 1fr); gap: 20px; }
}

@media (max-width: 600px) {
    .home-page .product-grid { grid-template-columns: 1fr; }
    .home-page .product-actions { flex-direction: column; }
}
